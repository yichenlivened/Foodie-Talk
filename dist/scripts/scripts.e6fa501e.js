"use strict";angular.module("foodieTalkApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/restaurant/:id",{templateUrl:"views/restaurant.html",controller:"RestaurantCtrl",controllerAs:"restaurant"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]).factory("myService",["$http",function(a){function b(){var a=new Date,b=a.getDate(),c=a.getMonth()+1,d=a.getFullYear();return 10>b&&(b="0"+b),10>c&&(c="0"+c),a=d+c+b}var c={clienId:"222LJGYTFP5HPMFVJLICYJ4UBWTBBQJRHPXI404GZEI3MT5T",clientSecret:"Y1TYEO5ZFREPIRXHVB5O1TSU1OGEH3K0DCWQXSR2NZKR4T1K"},d={asyncRestaurantList:function(d,e){var f={client_id:c.clienId,client_secret:c.clientSecret,ll:d,section:e,venuePhotos:1,v:b(),limit:20},g=a({method:"GET",url:"https://api.foursquare.com/v2/venues/explore",params:f}).success(function(a){return a.data}).error(function(a){console.log(a)});return g},asyncRestaurant:function(d){var e={client_id:c.clienId,client_secret:c.clientSecret,v:b()},f=a({method:"GET",url:"https://api.foursquare.com/v2/venues/"+d,params:e}).success(function(a){return a.data}).error(function(a){console.log(a)});return f}};return d}]).filter("price",function(){return function(a,b){var c,d="";for(c=0;c<parseInt(a);c++)d=d.concat(b);return d}}).filter("comment",function(){return function(a){return'"'+a+'"'}}).directive("starRating",function(){return{restrict:"AE",template:'<ul class="star-rating" tabindex="{{readonly ? 0 : -1}}" aria-label="{{ratingValue}} star" ng-class="{readonly: readonly}">  <li ng-repeat="star in stars" class="star" ng-class="{filled: star.filled}" ng-click="toggle($index)" tabindex="{{readonly ? -1 : 0}}">    <i class="fa fa-star" aria-label="{{$index+1}} star"></i>  </li></ul>',scope:{ratingValue:"=?ngModel",max:"=?",onRatingSelect:"&?",readonly:"=?"},link:function(a){function b(){a.stars=[];for(var b=0;b<a.max;b++)void 0===a.readonly||a.readonly===!1?a.stars.push({filled:b<Math.floor(a.ratingValue)}):a.stars.push({filled:b<Math.floor(a.ratingValue/2)})}void 0===a.max&&(a.max=5),void 0===a.ratingValue&&(a.ratingValue=Math.floor(10*Math.random()+1)),a.toggle=function(b){(void 0===a.readonly||a.readonly===!1)&&(a.ratingValue=b+1,a.onRatingSelect=function(){var a=b+1;return a})},a.$watch("ratingValue",function(a,c){c&&b()})}}}),angular.module("foodieTalkApp").controller("MainCtrl",["$scope","myService",function(a,b){a.loaded=!1,navigator.geolocation.getCurrentPosition(function(c){a.$apply(function(){a.position=c;var d="food",e=a.position.coords.latitude+","+a.position.coords.longitude;b.asyncRestaurantList(e,d).then(function(b){a.data=b.data.response,a.loaded=!0,a.restaurants=a.data.groups[0].items,console.log(a.restaurants)})})})}]),angular.module("foodieTalkApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("foodieTalkApp").controller("RestaurantCtrl",["$routeParams","$scope","myService",function(a,b,c){console.log(a),b.loaded=!1,b.rating=1,b.review="",b.isReadonly=!0,c.asyncRestaurant(a.id).then(function(a){b.restaurant=a.data.response,b.loaded=!0,console.log(b.restaurant)}),b.addComment=function(){b.comment={user:{firstName:"You"},text:b.review,rating:2*b.rating},b.restaurant.venue.tips.groups[0].items.unshift(b.comment),b.rating=1}}]),angular.module("foodieTalkApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<section ng-if="!loaded"> <h1 tabindex="0" autofocus>Loading...</h1> </section> <section ng-if="loaded"> <h1 tabindex="0" autofocus>Resaturant in <strong>{{data.headerFullLocation}}</strong></h1> <div class="row filters"> <div class="col-xs-12 col-md-12"> <label id="filters-label">Filters</label> </div> <div class="col-xs-12 col-md-6"> <label class="checkbox-inline"><input type="checkbox" data-ng-model="priceFilter" data-ng-true-value="{venue:{price:{tier:1}}}" data-ng-false-value aria-label="Filters Inexpensive">$</label> <label class="checkbox-inline"><input type="checkbox" data-ng-model="priceFilter" data-ng-true-value="{venue:{price:{tier:2}}}" data-ng-false-value aria-label="Filters Moderate">$$</label> <label class="checkbox-inline"><input type="checkbox" data-ng-model="priceFilter" data-ng-true-value="{venue:{price:{tier:3}}}" data-ng-false-value aria-label="Filters Pricey">$$$</label> <label class="checkbox-inline"><input type="checkbox" data-ng-model="priceFilter" data-ng-true-value="{venue:{price:{tier:4}}}" data-ng-false-value aria-label="Filters Ultra High-End">$$$$</label> </div> <div class="col-xs-12 col-md-6"> <label class="checkbox-inline"><input type="checkbox" data-ng-model="isOpenFilter" data-ng-true-value="{venue:{hours:{isOpen:true}}}" data-ng-false-value aria-label="Filters Open Now">Open Now</label> </div> </div> <article ng-repeat="restaurant in restaurants | filter:priceFilter | filter: isOpenFilter"> <div class="panel panel-default"> <div class="row"> <div class="col-xs-12 col-md-4"> <img class="img-responsive" ng-src="{{restaurant.venue.featuredPhotos.items[0].prefix + \'400x600\' + restaurant.venue.featuredPhotos.items[0].suffix}}" alt="photo of {{restaurant.venue.name}}"> </div> <div class="col-xs-12 col-md-8"> <div class="restaurant-detail"> <a class="restaurant-link" ng-href="#/restaurant/{{restaurant.venue.id}}" aria-label="{{restaurant.venue.categories[0].name}} {{restaurant.venue.name}}">{{restaurant.venue.name}}</a> <div star-rating ng-model="restaurant.venue.rating" readonly></div> <p>{{restaurant.venue.price.tier | price: restaurant.venue.price.currency}} <span>{{restaurant.venue.categories[0].name}}</span></p> <p><span class="glyphicon glyphicon-map-marker"></span> {{restaurant.venue.location.formattedAddress[0]}}</p> <p><span class="glyphicon glyphicon-time"></span> {{restaurant.venue.hours.status}}</p> <p><span class="glyphicon glyphicon-user"></span> {{restaurant.tips[0].text | comment}}</p> </div> </div> </div> </div> </article> </section>'),a.put("views/restaurant.html",'<section ng-if="!loaded"> <h1 tabindex="0" autofocus>Loading...</h1> </section> <section ng-if="loaded"> <article> <div class="panel panel-default"> <div class="row"> <div class="col-xs-12 col-md-4"> <img class="img-responsive" ng-src="{{restaurant.venue.bestPhoto.prefix + \'400x400\' + restaurant.venue.bestPhoto.suffix}}" alt="photo of {{restaurant.venue.name}}"> </div> <div class="col-xs-12 col-md-8"> <div class="restaurant-detail"> <a class="restaurant-link" ng-href="#/restaurant/{{restaurant.venue.id}}" aria-label="{{restaurant.venue.categories[0].name}} {{restaurant.venue.name}}">{{restaurant.venue.name}}</a> <div star-rating ng-model="restaurant.venue.rating" readonly></div><span> <p>{{restaurant.venue.price.tier | price: restaurant.venue.price.currency}} <span>{{restaurant.venue.categories[0].name}}</span></p> <p><span class="glyphicon glyphicon-map-marker"></span> {{restaurant.venue.location.formattedAddress[0]}}</p> <p><span class="glyphicon glyphicon-time"></span> {{restaurant.venue.hours.status}}</p> </span></div> </div> </div> </div> <div class="panel panel-default"> <form class="form-horizontal comment-form"> <textarea class="form-control" rows="3" ng-model="$parent.review" arai-label="Tell us your experience in this restaurant." placeholder="Tell us your experience in this restaurant."></textarea> <div class="comment-part"><div class="inline" star-rating ng-model="$parent.rating"></div><button class="btn btn-success inline" type="submit" ng-click="addComment()">Post Your Review</button></div> </form> <section class="comment" ng-repeat="listed in restaurant.venue.tips.groups[0].items"> <span class="name">{{listed.user.firstName}} : </span><div star-rating class="inline" ng-model="listed.rating" readonly></div> <p>{{listed.text | comment}}</p> </section> </div> </article> </section>')}]);